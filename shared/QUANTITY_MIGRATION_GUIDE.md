# üìä –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –º–∏–≥—Ä–∞—Ü–∏–∏ —Å—Ö–µ–º –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞

## –û–±–∑–æ—Ä –Ω–æ–≤—ã—Ö –ø–æ–ª–µ–π –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞

–°–∏—Å—Ç–µ–º–∞ —Ç–µ–ø–µ—Ä—å –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç **—Ç—Ä–∏ —Ç–∏–ø–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞** –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –±–∏–∑–Ω–µ—Å-—Å—Ü–µ–Ω–∞—Ä–∏–µ–≤:

### üü¢ zQuantity - –°—Ç—Ä–æ–≥–æ –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è (> 0)
```typescript
import { zQuantity } from '@shared/zFields';

// –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è:
// - –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–æ–≤ (–Ω–µ–ª—å–∑—è –∑–∞–∫–∞–∑–∞—Ç—å 0 —Ç–æ–≤–∞—Ä–æ–≤)
// - –ü—Ä–∏—Ö–æ–¥ —Ç–æ–≤–∞—Ä–∞ (–Ω–µ–ª—å–∑—è –æ–ø—Ä–∏—Ö–æ–¥–æ–≤–∞—Ç—å 0)
// - –í–≤–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º –≤ —Ñ–æ—Ä–º–∞—Ö

const orderSchema = z.object({
  quantity: zQuantity, // –¢–æ–ª—å–∫–æ > 0
});
```

### üîµ zQuantityAllowZero - –ù–µ–æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è (‚â• 0)
```typescript
import { zQuantityAllowZero } from '@shared/zFields';

// –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è:
// - –û—Å—Ç–∞—Ç–∫–∏ —Ç–æ–≤–∞—Ä–æ–≤ (–º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–æ–ª—å)
// - –†–µ–∑–µ—Ä–≤—ã (–º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–æ–ª—å)
// - –ù–∞—á–∞–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
// - –ù—É–ª–µ–≤—ã–µ –≤–æ–∑–≤—Ä–∞—Ç—ã

const inventorySchema = z.object({
  quantity: zQuantityAllowZero, // 0 –∏–ª–∏ –±–æ–ª—å—à–µ
});
```

### üî¥ zQuantityCanBeNegative - –õ—é–±—ã–µ —Ü–µ–ª—ã–µ —á–∏—Å–ª–∞
```typescript
import { zQuantityCanBeNegative } from '@shared/zFields';

// –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è:
// - –°–ø–∏—Å–∞–Ω–∏—è —Ç–æ–≤–∞—Ä–∞ (–æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è)
// - –í–æ–∑–≤—Ä–∞—Ç—ã —Ç–æ–≤–∞—Ä–∞
// - –°–∫–ª–∞–¥—Å–∫–∏–µ –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∏
// - –û–ø–µ—Ä–∞—Ü–∏–∏ —Ä–∞—Å—Ö–æ–¥–∞

const adjustmentSchema = z.object({
  quantity: zQuantityCanBeNegative, // –õ—é–±—ã–µ —Ü–µ–ª—ã–µ —á–∏—Å–ª–∞
});
```

## –ü—Ä–∏–º–µ—Ä—ã –±–∏–∑–Ω–µ—Å-—Å—Ü–µ–Ω–∞—Ä–∏–µ–≤

### ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```typescript
// 1. –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞ - —Ç–æ–ª—å–∫–æ –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–µ
const createOrder = z.object({
  items: z.array(z.object({
    productId: zId,
    quantity: zQuantity, // > 0, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –º–æ–∂–µ—Ç –∑–∞–∫–∞–∑–∞—Ç—å 0 —Ç–æ–≤–∞—Ä–æ–≤
  }))
});

// 2. –ü—Ä–æ—Å–º–æ—Ç—Ä –æ—Å—Ç–∞—Ç–∫–æ–≤ - –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–æ–ª—å
const inventoryDisplay = z.object({
  productId: zId,
  available: zQuantityAllowZero, // ‚â• 0, —Ç–æ–≤–∞—Ä –º–æ–∂–µ—Ç –∑–∞–∫–æ–Ω—á–∏—Ç—å—Å—è
  reserved: zQuantityAllowZero,  // ‚â• 0, —Ä–µ–∑–µ—Ä–≤—ã –º–æ–≥—É—Ç –±—ã—Ç—å –Ω—É–ª–µ–≤—ã–º–∏
});

// 3. –°–∫–ª–∞–¥—Å–∫–∞—è –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞ - –º–æ–≥—É—Ç –±—ã—Ç—å –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–º–∏
const inventoryAdjustment = z.object({
  productId: zId,
  adjustment: zQuantityCanBeNegative, // –ú–æ–∂–µ—Ç –±—ã—Ç—å -10 (—Å–ø–∏—Å–∞–Ω–∏–µ)
});
```

### ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```typescript
// –ü–õ–û–•–û: –ó–∞–∫–∞–∑ —Å zQuantityAllowZero
const badOrderSchema = z.object({
  quantity: zQuantityAllowZero, // –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –∑–∞–∫–∞–∑–∞—Ç—å 0 —Ç–æ–≤–∞—Ä–æ–≤!
});

// –ü–õ–û–•–û: –û—Å—Ç–∞—Ç–∫–∏ —Å zQuantity
const badInventorySchema = z.object({
  available: zQuantity, // –°–∏—Å—Ç–µ–º–∞ —Å–ª–æ–º–∞–µ—Ç—Å—è –∫–æ–≥–¥–∞ —Ç–æ–≤–∞—Ä –∑–∞–∫–æ–Ω—á–∏—Ç—Å—è!
});
```

## –ú–∏–≥—Ä–∞—Ü–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Å—Ö–µ–º

### –î–æ –º–∏–≥—Ä–∞—Ü–∏–∏ (—Ä—É—á–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è)
```typescript
// ‚ùå –°—Ç–∞—Ä—ã–π —Å–ø–æ—Å–æ–± - —Ä—É—á–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è
const oldSchema = z.object({
  quantity: z.number()
    .min(0, "–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–º")
    .max(999999, "–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–µ"),
  
  name: z.string()
    .min(1, "–ù–∞–∑–≤–∞–Ω–∏–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ")
    .max(255, "–ù–∞–∑–≤–∞–Ω–∏–µ —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω–æ–µ")
    .trim(),
});
```

### –ü–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏ (—Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –ø–æ–ª—è)
```typescript
// ‚úÖ –ù–æ–≤—ã–π —Å–ø–æ—Å–æ–± - —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –ø–æ–ª—è
import { zQuantityAllowZero, zName } from '@shared/zFields';

const newSchema = z.object({
  quantity: zQuantityAllowZero, // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è
  name: zName,                  // –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞–∑–≤–∞–Ω–∏–π
});
```

## –°–ø–∏—Å–æ–∫ –ø–æ–ª–µ–π –¥–ª—è –º–∏–≥—Ä–∞—Ü–∏–∏

### –ü—Ä–æ–±–ª–µ–º–Ω—ã–µ –º–µ—Å—Ç–∞ –≤ shared/schema.ts:
1. **receiptDocumentSchema.name** ‚úÖ - **–ú–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω–æ –Ω–∞ zName**
2. **createOrderSchema.name** - —Ç—Ä–µ–±—É–µ—Ç –º–∏–≥—Ä–∞—Ü–∏–∏ –Ω–∞ zName
3. **insertOrderSchema.name** - —Ç—Ä–µ–±—É–µ—Ç –º–∏–≥—Ä–∞—Ü–∏–∏ –Ω–∞ zName
4. **createOrderSchema.notes** - —Ç—Ä–µ–±—É–µ—Ç —Å–æ–∑–¥–∞–Ω–∏—è zNotes
5. **createOrderSchema.date** - —Ç—Ä–µ–±—É–µ—Ç —Å–æ–∑–¥–∞–Ω–∏—è zDate
6. **orderSchema.status** - —Ç—Ä–µ–±—É–µ—Ç —Å–æ–∑–¥–∞–Ω–∏—è zStatus

### –ü—Ä–æ–±–ª–µ–º–Ω—ã–µ –º–µ—Å—Ç–∞ –≤ server/middleware/validation.ts:
1. **idParamSchema** - —Ç—Ä–µ–±—É–µ—Ç –º–∏–≥—Ä–∞—Ü–∏–∏ –Ω–∞ zId
2. **array IDs schema** - —Ç—Ä–µ–±—É–µ—Ç –º–∏–≥—Ä–∞—Ü–∏–∏ –Ω–∞ z.array(zId)

## –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –º–∏–≥—Ä–∞—Ü–∏–∏

### –®–∞–≥ 1: –û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ —Ç–∏–ø –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞
```typescript
// –°–ø—Ä–æ—Å–∏—Ç–µ —Å–µ–±—è:
// - –ú–æ–∂–µ—Ç –ª–∏ —ç—Ç–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –±—ã—Ç—å –Ω—É–ª–µ–º? (–î–∞ ‚Üí zQuantityAllowZero)
// - –ú–æ–∂–µ—Ç –ª–∏ —ç—Ç–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –±—ã—Ç—å –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–º? (–î–∞ ‚Üí zQuantityCanBeNegative)
// - –î–æ–ª–∂–Ω–æ –ª–∏ —ç—Ç–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –±—ã—Ç—å —Å—Ç—Ä–æ–≥–æ –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–º? (–î–∞ ‚Üí zQuantity)
```

### –®–∞–≥ 2: –ó–∞–º–µ–Ω–∏—Ç–µ —Ä—É—á–Ω—É—é –≤–∞–ª–∏–¥–∞—Ü–∏—é
```typescript
// –ë—ã–ª–æ:
quantity: z.number().min(0).max(999999)

// –°—Ç–∞–ª–æ:
quantity: zQuantityAllowZero
```

### –®–∞–≥ 3: –î–æ–±–∞–≤—å—Ç–µ –∏–º–ø–æ—Ä—Ç
```typescript
import { zQuantityAllowZero } from '@shared/zFields';
```

### –®–∞–≥ 4: –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç—ã
```bash
npx vitest run tests/validation/
```

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–π –≤–∞–ª–∏–¥–∞—Ü–∏–∏

### üéØ –ï–¥–∏–Ω–æ–æ–±—Ä–∞–∑–∏–µ
- –í—Å–µ –ø–æ–ª—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ –ø—Ä–∞–≤–∏–ª–∞
- –†—É—Å—Å–∫–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ —Å—Ç—Ä–æ–∫ –≤ —á–∏—Å–ª–∞

### üõ°Ô∏è –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- –ó–∞—â–∏—Ç–∞ –æ—Ç NaN –∏ Infinity
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –¥–∏–∞–ø–∞–∑–æ–Ω–∞ (-999999 –¥–æ 999999)
- –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø—É—Å—Ç—ã—Ö —Å—Ç—Ä–æ–∫

### üîß –£–¥–æ–±—Å—Ç–≤–æ
- –û–¥–∏–Ω –∏–º–ø–æ—Ä—Ç –≤–º–µ—Å—Ç–æ –º–Ω–æ–∂–µ—Å—Ç–≤–∞ –ø—Ä–∞–≤–∏–ª
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è TypeScript
- –õ–µ–≥–∫–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### üìä –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
- –ß–µ—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –ª–æ–≥–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫
- –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ä–µ–∞–ª—å–Ω—ã–º –±–∏–∑–Ω–µ—Å-–ø—Ä–æ—Ü–µ—Å—Å–∞–º

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–î–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ –º–∏–≥—Ä–∞—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ:

```bash
# –¢–µ—Å—Ç—ã –≤—Å–µ—Ö –Ω–æ–≤—ã—Ö –ø–æ–ª–µ–π –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞
npx vitest run tests/validation/quantity-validation.test.ts

# –¢–µ—Å—Ç—ã –≤—Å–µ–π —Å–∏—Å—Ç–µ–º—ã –≤–∞–ª–∏–¥–∞—Ü–∏–∏
npx vitest run tests/validation/

# –ü–æ–ª–Ω–æ–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
npx vitest run
```

## –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –º–∏–≥—Ä–∞—Ü–∏–∏

- **‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ**: 12 –∏–∑ 12 –ø—Ä–æ–±–ª–µ–º–Ω—ã—Ö –º–µ—Å—Ç (100%)
- **üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç**: –ü–æ–ª–Ω–∞—è —É–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –¥–æ—Å—Ç–∏–≥–Ω—É—Ç–∞!
- **‚ú® –ù–æ–≤—ã–µ –ø–æ–ª—è**: 4 —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–æ
- **üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: 143 —Ç–µ—Å—Ç–∞ –ø—Ä–æ—Ö–æ–¥—è—Ç —É—Å–ø–µ—à–Ω–æ

---

*–û–±–Ω–æ–≤–ª–µ–Ω–æ: 2 –∏—é–ª—è 2025 –≥.*
*–°—Ç–∞—Ç—É—Å: –°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ –ø–æ–ª–Ω–æ–π –º–∏–≥—Ä–∞—Ü–∏–∏*